<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign-in</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="./signup.js"></script>
    <link rel="icon" type="image/x-icon" href="Favicon.jpg">
    <link rel="stylesheet" href="./signin.css">
    <link rel="stylesheet" href="./smdevice.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" />
</head>
<body>
    <div class="bg">
        <img src="./10161832.jpg" >
        <form class="signin" id="signin">
            <h3 style="margin-top: 0px;">Sign-In  <i class="fa-solid fa-xmark fa-lg" onclick="redirect()" id="cross" style="cursor:pointer;"></i></h3> 
            
            <i class="fa-solid fa-user" style="color:hotpink"></i> <label for="username">Username:</label> 
            <input type="text" id="username" name="username" placeholder="John@2003" style="width:270px;"  required><br> <br>
            <i class="fa-solid fa-lock" style="color: hotpink"></i> <label for="password">Password:</label> 
            <input type="password" id="password" name="password"style="width:275px;"  required> <br> <br>
            <input type="submit" value="Sign-in"  class="button"> <br> <br>
            <center> <span> Don't have an account? &nbsp; <a href="./signup.html">Sign-Up</a> </span> </center> 
        </form>

    </div>
    <script>
        let status=0;
       document.getElementById('signin').addEventListener('submit', function(event){
            event.preventDefault();
            let valid=true;
            let username=document.getElementById("username").value;
            console.log(username);
            let password=document.getElementById("password").value;
            console.log(password);
            const userid = JSON.parse(localStorage.getItem(username));

            console.log(userid);
          
            if(userid!=null){
               const userpassword= userid.password;
               console.log(userpassword);
               console.log(password);
               console.log(typeof password);
               console.log(typeof userpassword);
               typeof password;
               if(password===userpassword){
                Swal.fire({
                    title: "Welcome to Notes Warehouse!!",
                    html:`<b> ${userid.Firstname} ${userid.Lastname} &nbsp;<i class="bi bi-patch-check fa-solid fa-lg" style="color:hotpink"></i> </b>`,
                    icon: "success",
                    
                }).then((result) => {
                 
                    if (result.isConfirmed) {  
                        location.replace( 'Noteswarehouse.html');  
                        localStorage.setItem("loggedin",userid.username);
                        localStorage.setItem("status",status+=1);
                    }
                    else{
                        localStorage.setItem("status",status);
                    }
             
                });

               }
               else if(password!==userpassword){
                alert("password doesn't match");
               }
               else{
                alert("Username not found!!");
               }
            }
        });
        function redirect(){
            localStorage.setItem("status",status);
            window.location.href='Noteswarehouse.html';
        }
    </script>
</body>
</html>